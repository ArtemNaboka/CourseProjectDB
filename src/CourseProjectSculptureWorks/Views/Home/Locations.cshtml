@using CourseProjectSculptureWorks.Models.Entities
@model List<Location>

@{
    ViewData["Title"] = "Местоположения";
}

<link rel="stylesheet" href="~/css/locations.css" />
<link rel="stylesheet" href="~/css/tableStyles.css" />
<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/js/locations.js"></script>

<div class="column features">
    <form method="get" class="form-horizontal">
        <input class="form-control" name="searchString" type="text" placeholder="Название, цена, длительность" value="@ViewBag.SearchString" />
        <input style="width:100%; margin-top:5px;" type="submit" value="Поиск" class="btn btn-info" />
        <div>
            <br />
            <h4>
                Сортировать
            </h4>
            <div class="radio">
                <label><input type="radio" name="sortNum" value="0" checked>В исходном порядке</label>
            </div>
            <div class="radio">
                <label><input type="radio" name="sortNum" value="1">По виду</label>
            </div>
            <div class="radio">
                <label><input type="radio" name="sortNum" value="2">По стране</label>
            </div>
            <div class="radio">
                <label><input type="radio" name="sortNum" value="3">По городу</label>
            </div>
            <div class="radio">
                <label><input type="radio" name="sortNum" value="4">По цене</label>
            </div>
            <div class="radio">
                <label><input type="radio" name="sortNum" value="5">По длительности</label>
            </div>
            <input style="width:100%; margin-top:5px;" type="submit" value="Сортировать" class="btn btn-primary" />
        </div>
        <h4>Фильтр</h4>
        @{ 
            int count = 1;
        }
        @foreach (var typeOfLocation in Lists.LocationTypes)
        {
            <div class="checkbox">
                <label><input type="checkbox" flag="@count" name="boxFilter" value="@typeOfLocation">@typeOfLocation</label>
            </div>
            count++;
        }
        <input style="width:100%; margin-top:5px;" type="submit" value="Фильтровать" class="btn btn-primary" />
    </form>
</div>
<div class="column">
    <a asp-action="AddNewLocation" class="addBtn"><span class="glyphicon glyphicon-plus"></span>  Добавить местоположение</a>
    <div class="locationContainer">
        @if (Model != null && Model.Count != 0)
        {
            <table class="simple-little-table" cellspacing='0' id="styleTable">
                <tr style="background-color:aqua;">
                    <th style="width:150px;"><b>Название</b></th>
                    <th style="width:70px;"><b>Вид</b></th>
                    <th style="width:150px;"><b>Адрес</b></th>
                    <th style="width:130px;"><b>Цена экскурсии для одного человека</b></th>
                    <th style="width:20px;"><b>Длительность экскурсии</b></th>
                    <th style="width:50px;"></th>
                    <th style="width:50px;"></th>
                </tr>
                @foreach (var location in Model)
                {
                    <tr id="@location.LocationId">
                        <td>@location.LocationName</td>
                        <td>@location.LocationType</td>
                        <td>@location.Country, @location.City,<br />@location.Address</td>
                        <td>@location.PriceForPerson UAN</td>
                        <td>@location.DurationOfExcursion мин</td>
                        <td><a style="color:cornflowerblue;" title="Редактировать" asp-action="EditLocation" asp-route-locationId="@location.LocationId"><span class="glyphicon glyphicon-pencil"></span></a></td>
                        <td><a style="color:crimson;" class="del" locationId="@location.LocationId" title="Удалить"><span class="glyphicon glyphicon-trash"></span></a></td>
                    </tr>
                }
            </table>
        }
        else
        {
            <h3>В базе данных отсутствует искомая информация о местоположениях...</h3>
        }
    </div>
</div>

@if (ViewBag.Checked != 0)
{
    <script>
        var checkedNum = @ViewBag.Checked;
        $("input[value=" + checkedNum + "]").attr("checked", true);
    </script>
}

@if (ViewBag.Filters != null)
{
    foreach (var filter in ((List<int>)ViewBag.Filters))
    {
        <script>
            var scriptFilter = @filter;
            $("input[flag=" + scriptFilter + "]").attr("checked", true);
        </script>
    }
}

